!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const I=["A21117FF","A11117FF","A11127FF","A21127FF","A21107FF","A21107FE","A21117FE"];function S(t){if(19!=t.length)return t;const e=2047,n=parseInt(t.substring(0,4),16),r=parseInt(t.substring(5,9),16),o=parseInt(t.substring(10,14),16),u=parseInt(t.substring(15,19),16);let s=0,i=0,l=0;s=n<e?n+2049:n-e,l=o<e?o+2049:o-e,i=r<127?r+129:r-127;const c=[];c[0]="0",c[1]=u.toString(16).toUpperCase().padStart(3,"0"),c[2]=i.toString(16).toUpperCase().padStart(2,"0"),c[3]=l.toString(16).toUpperCase().padStart(3,"0"),c[4]=s.toString(16).toUpperCase().padStart(3,"0");const a=c.join("");return 12==a.length?a:""}const _={input:{themeswitcher:"themeswitcher",portalglyphsInput:"portalglyphsInput",delButton:"delButton",submitBtnGen:"submitBtnGen",resetBtnGen:"resetBtnGen",tagInput:"tagInput",submitBtnDec:"submitBtnDec",resetBtnDec:"resetBtnDec"},output:{toc:"toc",glyphDisplay:"glyphDisplay"}},i={};function L(t){for(const e of Object.entries(t)){const t=e[0],n=e[1];for(const[e,r]of Object.entries(n)){const n=B(r);null!=n&&(i[t]??(i[t]={}),i[t][e]=n)}}}function B(t){const e=Array.from(document.getElementsByName(t));return e.length?e:document.getElementById(t)}function v(t){const e=G(t),n=document.querySelector(`#${e} .output`),r=n.querySelector("output"),o=n.querySelector(".status"),u={generator:()=>M(),decoder:()=>U()},{status:s="",output:i=""}=u[e](),l=s.includes("Error");n.classList[l?"add":"remove"]("error"),o.innerText=s,r.innerText=i}function x(t){const e=G(t),n=document.getElementById(e),r=n.querySelector("input"),o=Array.from(n.querySelectorAll("output, .output>*")),u=Array.from(n.querySelectorAll(".error"));for(const t of u)t.classList.remove("error");for(const t of o)t.innerHTML="";r.value=""}L(_);const C=window.matchMedia("(prefers-color-scheme: dark)").matches;function F(t=null){const e="dark"==document.documentElement.dataset.theme?"light":"dark",n=t??e;document.documentElement.dataset.theme=n}F(C?"dark":"light");const N=[{element:"themeswitcher",handler:"click",func:function(){F()}},{element:"portalglyphsInput",handler:"input",func:function(){D(this)}},{element:"delButton",handler:"click",func:function(){k("portalglyphsInput")}},{element:"tagInput",handler:"input",func:function(){this.value=this.value.toUpperCase()}},{element:"submitBtnGen",handler:"click",func:function(){v(this)}},{element:"resetBtnGen",handler:"click",func:function(){x(this)}},{element:"submitBtnDec",handler:"click",func:function(){v(this)}},{element:"resetBtnDec",handler:"click",func:function(){x(this)}}];for(const t of N)O(t);function O(t){const{handler:e,func:n}=t,r=t.element,o=i[r]?i[r]:B(r);Array.isArray(o)?o.forEach((t=>t.addEventListener(e,n))):o.addEventListener(e,n)}const y="0123456789ABCDEF",V=767,h=4,g=12,w=document.querySelector(".portal-buttons"),A=[],T=[];for(let t=0;t<y.length;t++){const e={element:"glyphButton"+t.toString(),handler:"click",func:function(){q(this)}},n=y[t],r=`<button class="button glyphs" type="button" id="glyphButton${t}" value="${n}">${n}</button>`;A.push(r),T.push(e)}w.innerHTML=A.join("");for(const t of T)O(t);function D(t){var e;const n=null==(e=null==t?void 0:t.value)?void 0:e.toUpperCase();if(null==n)return;const r=n.split("").filter((t=>(y+":").includes(t))).join("").substring(0);t.value=r,m(t)}function E(t=void 0){var e,n;const r=null==(e=i.input)?void 0:e.portalglyphsInput,o=null==(n=i.output)?void 0:n.glyphDisplay;r instanceof HTMLInputElement&&o instanceof HTMLOutputElement&&(o.innerText=t??r.value)}function q(t){const e=i.input.portalglyphsInput;e.value.length<g&&(e.value+=t.value),E(),m(e)}function k(t){const e=document.getElementById(t),n=e.value.slice(0,-1);e.value=n,E(),m(e)}function m(t,e=!1){const n=S(t.value);E(n);const r=n.substring(h),o=n.substring(1,h),u=parseInt(o,16),s=n.length===g,i=I.includes(r),l=u&&u<V+1,c=e||n.length==g?s&&i&&l:n.length!=g;if(t.classList[c?"remove":"add"]("error"),!c){if(!s)return{isValid:!1,error:"Invalid glyph sequence: Incorrect length"};if(!i)return{isValid:!1,error:"Invalid glyph sequence: No Eisvana region"};if(!l)return{isValid:!1,error:"Invalid glyph sequence: Not reachable via portal"}}return{isValid:!0}}function j(t){const e=S(t).substring(h),n=I.indexOf(e);return n>-1?n+1:0}function H(t){const e=S(t).substring(1,h),n=parseInt(e,16);return!n||n>V?"":n.toString(16).toUpperCase().replace("69","68+1")}const P=3;function G(t){return t.closest("section").id}function M(){const t=i.input.portalglyphsInput,e=t.value,{isValid:n,error:r=""}=m(t,!0);if(!e)return{status:"",output:""};if(!n)return{status:"Error:",output:r};return{status:"System Name Prefix:",output:`EV${j(e)}-${H(e)}`}}function U(){const t=i.input.tagInput.value.replaceAll(/[\[\]]/g,"").replaceAll("68+1","69").trim();if(!t)return{status:"",output:""};const[e,n]=t.split("-"),r=e.replace("EV",""),o=parseInt(r)-1,u=I[o];if(!n||!u||!e.startsWith("EV")){let t="";return n?(!u||!e.startsWith("EV"))&&(t='Invalid prefix format (no "EV" or wrong region ID)'):t='Invalid prefix format (missing "-")',{status:"Error:",output:t}}return{status:"Glyphs:",output:"0"+n.padStart(P,"0")+u}}
